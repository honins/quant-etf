# AI 驱动的 ETF 量化交易系统 (Quant-ETF)

[![AI Powered](https://img.shields.io/badge/AI-XGBoost-blue)](src/models/xgb_model.py)
[![Strategy](https://img.shields.io/badge/Strategy-Hybrid-green)](STRATEGIES.md)
[![License](https://img.shields.io/badge/license-MIT-gray)]()

这是一个**务实的、AI 驱动的波段交易辅助系统**。

它不仅仅是一个简单的指标计算器，而是一个集成了 **XGBoost 机器学习** 和 **传统规则风控** 的混合决策系统。它旨在帮助普通交易者在 A 股 ETF 市场中寻找高胜率的买点，并严格控制回撤。

---

## 🚀 核心亮点

*   **🧠 AI 进化 (XGBoost)**: 抛弃死板的指标规则，使用竞赛级算法 **XGBoost** 从历史数据中自动挖掘非线性 Alpha。
*   **🛡️ 混合策略 (Hybrid Strategy)**:
    *   **进攻**: 由 AI 负责，敏锐捕捉量价时空的共振机会。
    *   **防守**: 由规则负责，大盘熊市强制空仓，个股亏损强制止损。
*   **🎒 持仓管家**: 自动跟踪您的持仓，每日计算**移动止盈位 (Trailing Stop)**，告诉您何时该止盈离场，锁住利润。
*   **📝 智能点评**: 内置技术面解释器，将冷冰冰的指标翻译成“均线多头”、“超买风险”等通俗人话。
*   **⚡ 极速响应**: 纯 Python (Pandas) 实现，无需安装复杂的 TA-Lib，开箱即用。

---

## 📚 文档导航

*   [**STRATEGIES.md**](STRATEGIES.md): 深度解析为什么选择 XGBoost？为什么放弃贝叶斯？混合策略是如何工作的？
*   [**ALGORITHM_DETAILS.md**](ALGORITHM_DETAILS.md): 系统的“白皮书”。详细列出了 12 个核心特征的计算公式和 AI 模型的训练细节。

---

## 🎬 理想工作流 (Daily Workflow)

本系统旨在成为您的**“智能副驾驶”**。推荐的日常使用流程：

### 🕒 1. 收盘后 (15:10)
运行程序生成日报。

```bash
python main.py
```

您会看到类似这样的分析：
> **[卫星ETF]**
> *   🤖 **AI 评分**: **0.64** (高分信号!)
> *   📝 **点评**: 均线多头排列，但 RSI 进入超买区。
> *   💡 **决策**: **买入**
> *   🛡️ **风控**: 止损位 **2.01** (ATR=0.08)

### 🕒 2. 盘前 (次日 09:25)
根据昨晚的计划，挂单买入。同时设置条件单（止损单）。

### 🕒 3. 持仓期
每天运行程序，关注 **移动止盈位** 的更新。
*   如果价格上涨，止盈位会自动上移，锁定利润。
*   如果价格跌破止盈位，坚决离场。

---

## 🛠️ 安装与使用

### 1. 环境准备

```bash
# 创建虚拟环境
python -m venv venv

# 激活环境 (Windows)
venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt
```

### 2. 配置 Token

1.  复制 `.env.example` 为 `.env`
2.  填入您的 Tushare Token (注册获取: [https://tushare.pro/](https://tushare.pro/))

### 3. 训练 AI 模型 (可选)

系统已内置了预训练好的模型。如果您想使用最新数据重新训练：

```bash
python train_and_backtest.py
```

### 4. 运行回测 (验证效果)

想看看最近 2 个月哪些标的最赚钱？

```bash
python backtest_detail.py
```

---

## 📊 策略表现 (2025.11 - 2026.01)

基于最近 2 个月的实盘模拟回测（详细报告见 `reports/backtest_detail_2m.md`）：

| 标的 | 收益率 | 交易次数 | 评价 |
| :--- | :--- | :--- | :--- |
| **卫星ETF** | **+72.45%** | 2 | 🚀 完美捕捉主升浪，单笔获利近60% |
| **有色金属ETF** | **+30.58%** | 1 | 💎 稳健的趋势持有 |
| **半导体ETF** | **+22.74%** | 1 | 🔌 科技复苏红利 |
| **科创50ETF** | **+17.29%** | 1 | 📈 成功抄底 |
| **人工智能ETF** | **+11.20%** | 2 | 🤖 热门题材波段 |
| **沪深300** | -5.80% | 3 | 🛡️ 震荡市反复止损 (侧面证明了选股的重要性) |

*注：历史业绩不代表未来表现，投资有风险，入市需谨慎。*

---

## ⚖️ 风险提示 (Disclaimer)

**本系统仅供技术研究和辅助参考，不构成任何投资建议。**

1.  **过拟合风险**: AI 模型基于历史数据训练，历史不代表未来。
2.  **市场风险**: 策略无法预测黑天鹅事件（如政策突变、战争）。
3.  **执行风险**: 实盘交易存在滑点、手续费及成交延迟，可能导致实际收益低于回测。
4.  **震荡市磨损**: 在长期横盘震荡市场中，趋势策略可能会连续止损，导致本金回撤。

**请务必严格遵守 ATR 止损规则，控制仓位，理性投资。**
